{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jonat\\\\OneDrive\\\\Documentos\\\\Documentos Escolares\\\\Trabajo\\\\Proyectos\\\\cms\\\\src\\\\pages\\\\prospectos\\\\ModalContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { rutaAPI } from \"../../config/Config\";\nimport ProspectoModal from \"./presentation/ProspectoModal\";\nimport $ from \"jquery\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Modalcontainer({\n  prospecto,\n  history\n}) {\n  _s();\n\n  const [data, setData] = useState({});\n  const [error, setError] = useState(null);\n  const [observaCount, setObservaCount] = useState(0);\n  useEffect(() => {\n    const fetchResource = async () => {\n      try {\n        let res = await fetch(`${rutaAPI}/mostrar-prospecto/${prospecto}`);\n        let data = await res.json();\n        setData(data.data[0]);\n      } catch (error) {\n        setError(error);\n      }\n    };\n\n    fetchResource();\n  }, [prospecto]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let config = {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    };\n    let res = await fetch(`${rutaAPI}/edit-prospecto/${data._id}`, config);\n    let json = await res.json();\n    console.log(json); // if (json.status == 200) {\n    //   history.push(\"/\");\n    // }\n  };\n\n  const handleChange = e => {\n    console.log(\"Me cambiaste\");\n    setData({ ...data,\n      [e.target.name]: e.target.value\n    });\n    let estado = e.target.value;\n    console.log(\"estado\", e.target.name);\n\n    if (e.target.name == \"Prospect_Status\" && estado == \"Rechazado\" && observaCount < 1) {\n      setObservaCount(observaCount + 1);\n      $(\"#observaciones\").append(\"<label class='observaciones'>Observaciones:</label>\").append($(\"<textarea>\").addClass(\"form-control observaciones\").attr(\"rows\", \"3\"));\n    }\n  };\n\n  const handleOnClick = () => {\n    $(\".observaciones\").remove();\n    setObservaCount(0);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ProspectoModal, {\n    onChange: handleChange,\n    onSubmit: handleSubmit,\n    onClick: handleOnClick,\n    ...data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Modalcontainer, \"1LPDYe1snzP6ggJFp6KRJ7sx3CM=\");\n\n_c = Modalcontainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Modalcontainer\");","map":{"version":3,"sources":["C:/Users/jonat/OneDrive/Documentos/Documentos Escolares/Trabajo/Proyectos/cms/src/pages/prospectos/ModalContainer.jsx"],"names":["React","useState","useEffect","rutaAPI","ProspectoModal","$","Modalcontainer","prospecto","history","data","setData","error","setError","observaCount","setObservaCount","fetchResource","res","fetch","json","handleSubmit","e","preventDefault","config","method","headers","Accept","body","JSON","stringify","_id","console","log","handleChange","target","name","value","estado","append","addClass","attr","handleOnClick","remove"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { rutaAPI } from \"../../config/Config\";\r\n\r\nimport ProspectoModal from \"./presentation/ProspectoModal\";\r\nimport $ from \"jquery\";\r\n\r\nexport default function Modalcontainer({ prospecto, history }) {\r\n  const [data, setData] = useState({});\r\n  const [error, setError] = useState(null);\r\n  const [observaCount, setObservaCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchResource = async () => {\r\n      try {\r\n        let res = await fetch(`${rutaAPI}/mostrar-prospecto/${prospecto}`);\r\n        let data = await res.json();\r\n\r\n        setData(data.data[0]);\r\n      } catch (error) {\r\n        setError(error);\r\n      }\r\n    };\r\n    fetchResource();\r\n  }, [prospecto]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    let config = {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(data),\r\n    };\r\n    let res = await fetch(`${rutaAPI}/edit-prospecto/${data._id}`, config);\r\n    let json = await res.json();\r\n    console.log(json);\r\n\r\n    // if (json.status == 200) {\r\n    //   history.push(\"/\");\r\n    // }\r\n  };\r\n  const handleChange = (e) => {\r\n    console.log(\"Me cambiaste\");\r\n    setData({ ...data, [e.target.name]: e.target.value });\r\n\r\n    let estado = e.target.value;\r\n\r\n    console.log(\"estado\", e.target.name);\r\n\r\n    if (\r\n      e.target.name == \"Prospect_Status\" &&\r\n      estado == \"Rechazado\" &&\r\n      observaCount < 1\r\n    ) {\r\n      setObservaCount(observaCount + 1);\r\n\r\n      $(\"#observaciones\")\r\n        .append(\"<label class='observaciones'>Observaciones:</label>\")\r\n        .append(\r\n          $(\"<textarea>\")\r\n            .addClass(\"form-control observaciones\")\r\n            .attr(\"rows\", \"3\")\r\n        );\r\n    }\r\n  };\r\n\r\n  const handleOnClick = () => {\r\n    $(\".observaciones\").remove();\r\n    setObservaCount(0);\r\n  };\r\n\r\n  return (\r\n    <ProspectoModal\r\n      onChange={handleChange}\r\n      onSubmit={handleSubmit}\r\n      onClick={handleOnClick}\r\n      {...data}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}